{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Output, Input, EventEmitter, ViewChild } from '@angular/core';\nimport { RouteStop } from '../../types';\nlet AddressInputComponent = class AddressInputComponent {\n  constructor(dataService) {\n    this.dataService = dataService;\n    this.address = new EventEmitter();\n    this.addressType = 'address';\n  }\n\n  ngOnInit() {\n    switch (this.type) {\n      case RouteStop.WAYPOINT:\n        this.waypointComponentIndex = this.dataService.createWaypointComponent();\n        this.icon = 'dog';\n        break;\n\n      case RouteStop.START:\n        this.icon = 'place';\n        break;\n\n      case RouteStop.END:\n        this.icon = 'map';\n        break;\n    }\n  }\n\n  ngAfterViewInit() {\n    this.addressText.nativeElement.focus();\n    this.setAddress();\n  }\n\n  setAddress() {\n    const outerWellingtonBounds = new google.maps.LatLngBounds( // SouthWest coordinates\n    {\n      lng: 174.5947265625,\n      lat: -41.409775832009544\n    }, // NorthEast coordinates\n    {\n      lng: 175.1495361328125,\n      lat: -41.01099329360267\n    });\n    const autocomplete = new google.maps.places.Autocomplete(this.addressText.nativeElement, {\n      bounds: outerWellingtonBounds,\n      componentRestrictions: {\n        country: 'NZ'\n      },\n      fields: ['address_components', 'geometry'],\n      types: ['address']\n    });\n    google.maps.event.addListener(autocomplete, 'place_changed', () => {\n      const place = autocomplete.getPlace();\n      this.addressSet(place);\n\n      if (this.type === RouteStop.WAYPOINT) {\n        this.dataService.addRoute(place, this.type, this.waypointComponentIndex);\n      } else this.dataService.addRoute(place, this.type);\n    });\n  }\n\n  addressSet(place) {\n    this.address.emit(place);\n    this.dataService.setCenter(place);\n  }\n\n};\n\n__decorate([Output()], AddressInputComponent.prototype, \"address\", void 0);\n\n__decorate([ViewChild('addressInput')], AddressInputComponent.prototype, \"addressText\", void 0);\n\n__decorate([Input()], AddressInputComponent.prototype, \"type\", void 0);\n\nAddressInputComponent = __decorate([Component({\n  selector: 'app-address-input',\n  templateUrl: './address-input.component.html',\n  styleUrls: ['./address-input.component.scss']\n})], AddressInputComponent);\nexport { AddressInputComponent };","map":null,"metadata":{},"sourceType":"module"}